{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./Styles/Menu.css';import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Menu=_ref=>{let{active,setActive}=_ref;const[isOpen,setIsOpen]=useState(false);const[isRotated,setIsRotated]=useState(false);const[user,setUser]=useState(null);const navigate=useNavigate();const toggleToolbar=()=>{setIsOpen(!isOpen);setIsRotated(!isRotated);};const redirectTo=url=>{navigate(url);};const redirectToLogout=()=>{window.location.replace('https://localhost:8080/api/logout');};useEffect(()=>{getUser();},[]);const getUser=async()=>{try{const response=await fetch('https://localhost:8080/api/infoAboutUser',{method:'GET',credentials:'include'});const userok=await response.json();setUser(userok);}catch(error){console.error('Error fetching user info',error);}};const redirectToDelete=async()=>{try{if(window.confirm('Вы уверены, что хотите удалить свою учетную запись?')){const response=await fetch('https://localhost:8080/api/user',{method:'DELETE',credentials:'include'});if(response.ok)window.location.replace('https://localhost:8080/api/logout');}}catch(error){console.error('Error deleting',error);alert('Error deleting.');}};return/*#__PURE__*/_jsxs(\"div\",{className:active?'menu active':'menu',children:[/*#__PURE__*/_jsx(\"div\",{className:active?'blur active':'blur'}),/*#__PURE__*/_jsx(\"div\",{className:\"menu-content\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[user&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"Name: \",user.name]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Created: \",new Date(user.created).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Updated: \",new Date(user.updated).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Role: \",user.roles]})]}),/*#__PURE__*/_jsx(\"li\",{className:\"delete\",children:/*#__PURE__*/_jsx(\"a\",{onClick:redirectToDelete,children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0443\\u0447\\u0435\\u0442\\u043D\\u0443\\u044E \\u0437\\u0430\\u043F\\u0438\\u0441\\u044C\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{onClick:()=>redirectTo('/update'),children:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u043C\\u043E\\u0438 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"exit\",children:/*#__PURE__*/_jsx(\"a\",{className:\"exit\",onClick:redirectToLogout,children:\"\\u0412\\u044B\\u0439\\u0442\\u0438\"})})]})})]});};export default Menu;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Menu","_ref","active","setActive","isOpen","setIsOpen","isRotated","setIsRotated","user","setUser","navigate","toggleToolbar","redirectTo","url","redirectToLogout","window","location","replace","getUser","response","fetch","method","credentials","userok","json","error","console","redirectToDelete","confirm","ok","alert","className","children","name","Date","created","toLocaleDateString","updated","roles","onClick"],"sources":["C:/Users/dimu2/Java/SpringSecurity_1805/Frontend/spa/src/Menu.jsx"],"sourcesContent":["import React, {useEffect, useState} from 'react'\r\nimport './Styles/Menu.css'\r\nimport {useNavigate} from \"react-router-dom\";\r\n\r\nconst Menu = ({active,setActive}) => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [isRotated, setIsRotated] = useState(false);\r\n    const [user, setUser] = useState(null);\r\n    const navigate=useNavigate()\r\n    const toggleToolbar = () => {\r\n        setIsOpen(!isOpen);\r\n        setIsRotated(!isRotated);\r\n    };\r\n    const redirectTo=(url)=>{\r\n\r\n        navigate(url);\r\n    }\r\n    const redirectToLogout = () => {\r\n        window.location.replace('https://localhost:8080/api/logout');\r\n    };\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        getUser();\r\n    }, []);\r\n\r\n    const getUser = async () => {\r\n        try {\r\n            const response = await fetch('https://localhost:8080/api/infoAboutUser', {\r\n                method: 'GET',\r\n                credentials: 'include'\r\n            });\r\n\r\n            const userok = await response.json();\r\n            setUser(userok);\r\n\r\n        } catch (error) {\r\n            console.error('Error fetching user info', error);\r\n        }\r\n\r\n\r\n    };\r\n    const redirectToDelete = async () => {\r\n        try {\r\n            if (window.confirm('Вы уверены, что хотите удалить свою учетную запись?')) {\r\n                const response = await fetch('https://localhost:8080/api/user', {\r\n                    method: 'DELETE',\r\n                    credentials: 'include'\r\n                });\r\n                if (response.ok)\r\n                    window.location.replace('https://localhost:8080/api/logout');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error deleting', error);\r\n            alert('Error deleting.');\r\n        }\r\n    };\r\n    return (\r\n        <div className={active?'menu active':'menu'}>\r\n            <div className={active?'blur active':'blur'}/>\r\n            <div className=\"menu-content\">\r\n                <ul>\r\n                    {user && (\r\n                        <>\r\n                            <li>Name: {user.name}</li>\r\n                            <li>Created: {new Date(user.created).toLocaleDateString()}</li>\r\n                            <li>Updated: {new Date(user.updated).toLocaleDateString()}</li>\r\n                            <li>Role: {user.roles}</li>\r\n                        </>\r\n                    )}\r\n                    <li className=\"delete\"><a onClick={redirectToDelete}>Удалить учетную запись</a></li>\r\n                    <li><a onClick={() => redirectTo('/update')}>Обновить мои данные</a></li>\r\n                    <li className='exit'><a className=\"exit\" onClick={redirectToLogout}>Выйти</a></li>\r\n                </ul>\r\n            </div>\r\n\r\n\r\n        </div>)\r\n\r\n\r\n\r\n}\r\nexport default Menu;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}