{"ast":null,"code":"import React,{useState}from'react';import'./Styles/Update.css';import{useNavigate}from\"react-router-dom\";import logo from'./logo.svg';// Import the default logo\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Update=()=>{const[name,setName]=useState('');const[password,setPassword]=useState('');const[tele,setTele]=useState('');const[git,setGit]=useState('');const[file,setFile]=useState(null);// Start with no file selected\nconst navigate=useNavigate();const handleSubmit=async event=>{event.preventDefault();const formData=new FormData();formData.append('name',name);formData.append('password',password);formData.append('tele',tele);formData.append('git',git);// If file is selected, append it; otherwise, append the default logo\nif(file){formData.append('file',file);}else{// Fetch the logo file as Blob\nconst response=await fetch(logo);const logoBlob=await response.blob();formData.append('file',logoBlob);}const json=JSON.stringify({name,password,tele,git});formData.append('json',new Blob([json],{type:'application/json'}));try{const response=await fetch('https://localhost:8080/api/user',{method:'PATCH',body:formData,credentials:\"include\"});if(response.ok){alert('Data sent successfully!');}else{const errorMessage=await response.text();alert(\"Failed to send data: \".concat(errorMessage));}}catch(error){alert(\"An error occurred: \".concat(error.message));}};const handleRedirect=()=>{navigate('/profile');};return/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Enter Data\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",name:\"name\",placeholder:\"Enter your Name\",value:name,onChange:e=>setName(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",placeholder:\"Enter your Password\",value:password,onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"tele\",name:\"tele\",placeholder:\"Enter your Telegram\",value:tele,onChange:e=>setTele(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"git\",name:\"git\",placeholder:\"Enter your GitHub\",value:git,onChange:e=>setGit(e.target.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-input-container\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"file-input-label\",htmlFor:\"file\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043D\\u043E\\u0432\\u044B\\u0439 \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"file\",name:\"file\",onChange:e=>setFile(e.target.files[0])})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Send\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"Back\",onClick:handleRedirect,children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"})]});};export default Update;","map":{"version":3,"names":["React","useState","useNavigate","logo","jsx","_jsx","jsxs","_jsxs","Update","name","setName","password","setPassword","tele","setTele","git","setGit","file","setFile","navigate","handleSubmit","event","preventDefault","formData","FormData","append","response","fetch","logoBlob","blob","json","JSON","stringify","Blob","type","method","body","credentials","ok","alert","errorMessage","text","concat","error","message","handleRedirect","className","children","onSubmit","encType","id","placeholder","value","onChange","e","target","htmlFor","files","onClick"],"sources":["C:/Users/dimu2/Java/SpringSecurity_1805/Frontend/spa/src/Update.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport './Styles/Update.css';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport logo from './logo.svg';  // Import the default logo\r\n\r\nconst Update = () => {\r\n    const [name, setName] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [tele, setTele] = useState('');\r\n    const [git, setGit] = useState('');\r\n    const [file, setFile] = useState(null);  // Start with no file selected\r\n    const navigate = useNavigate();\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n\r\n        const formData = new FormData();\r\n        formData.append('name', name);\r\n        formData.append('password', password);\r\n        formData.append('tele', tele);\r\n        formData.append('git', git);\r\n\r\n        // If file is selected, append it; otherwise, append the default logo\r\n        if (file) {\r\n            formData.append('file', file);\r\n        } else {\r\n            // Fetch the logo file as Blob\r\n            const response = await fetch(logo);\r\n            const logoBlob = await response.blob();\r\n            formData.append('file', logoBlob);\r\n        }\r\n\r\n        const json = JSON.stringify({ name, password, tele, git });\r\n        formData.append('json', new Blob([json], { type: 'application/json' }));\r\n\r\n        try {\r\n            const response = await fetch('https://localhost:8080/api/user', {\r\n                method: 'PATCH',\r\n                body: formData,\r\n                credentials: \"include\"\r\n            });\r\n\r\n            if (response.ok) {\r\n                alert('Data sent successfully!');\r\n            } else {\r\n                const errorMessage = await response.text();\r\n                alert(`Failed to send data: ${errorMessage}`);\r\n            }\r\n        } catch (error) {\r\n            alert(`An error occurred: ${error.message}`);\r\n        }\r\n    };\r\n\r\n    const handleRedirect = () => {\r\n        navigate('/profile');\r\n    };\r\n    return (\r\n        <div className=\"form-container\">\r\n            <h1>Enter Data</h1>\r\n            <form onSubmit={handleSubmit} encType=\"multipart/form-data\">\r\n                <input\r\n                    type=\"text\"\r\n                    id=\"name\"\r\n                    name=\"name\"\r\n                    placeholder=\"Enter your Name\"\r\n                    value={name}\r\n                    onChange={(e) => setName(e.target.value)}\r\n                />\r\n                <input\r\n                    type=\"password\"\r\n                    id=\"password\"\r\n                    name=\"password\"\r\n                    placeholder=\"Enter your Password\"\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                />\r\n                <input\r\n                    type=\"text\"\r\n                    id=\"tele\"\r\n                    name=\"tele\"\r\n                    placeholder=\"Enter your Telegram\"\r\n                    value={tele}\r\n                    onChange={(e) => setTele(e.target.value)}\r\n                />\r\n                <input\r\n                    type=\"text\"\r\n                    id=\"git\"\r\n                    name=\"git\"\r\n                    placeholder=\"Enter your GitHub\"\r\n                    value={git}\r\n                    onChange={(e) => setGit(e.target.value)}\r\n                />\r\n                <div className=\"file-input-container\">\r\n                    <label className=\"file-input-label\" htmlFor=\"file\">Выберите новый аватар</label>\r\n                    <input\r\n                        type=\"file\"\r\n                        id=\"file\"\r\n                        name=\"file\"\r\n                        onChange={(e) => setFile(e.target.files[0])}\r\n                    />\r\n                </div>\r\n                <button type=\"submit\">Send</button>\r\n            </form>\r\n            <button className=\"Back\" onClick={handleRedirect}>Назад</button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Update;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}