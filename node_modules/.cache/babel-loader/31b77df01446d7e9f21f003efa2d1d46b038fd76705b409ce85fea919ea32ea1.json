{"ast":null,"code":"import React,{useState}from'react';import'./Styles/Registr.css';import{useNavigate}from'react-router-dom';import*as events from\"events\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserForm=()=>{const[name,setName]=useState('');const[password,setPassword]=useState('');const[roles,setRoles]=useState('');const[file,setFile]=useState(null);const[check,setCheck]=useState(true);const navigate=useNavigate();const handleSubmit=async event=>{event.preventDefault();// предотвращаем стандартное поведение отправки формы\nconst formData=new FormData();formData.append('name',name);formData.append('password',password);formData.append('roles',roles);formData.append('file',file);try{const response=await fetch('https://localhost:8080/api/user',{method:'POST',body:formData});navigate('/');}catch(error){console.error('Error:',error);alert('Ошибка при отправке данных');}};const checking=async name=>{try{console.log(name);const response=await fetch('https://localhost:8080/api/checking',{method:'POST',body:JSON.stringify({name}),headers:{'Content-Type':'application/json'}});if(response.status===200){setCheck(false);}else{setCheck(true);}}catch(error){console.error('Error:',error);setCheck(true);}};const handleNameChange=async events=>{const newName=events.target.value;setName(newName);await checking(newName);};return/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Enter Data\"}),/*#__PURE__*/_jsxs(\"form\",{id:\"userForm\",onSubmit:handleSubmit,encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"input\",{className:check?'input-valid':'input-invalid',type:\"text\",id:\"name\",name:\"name\",placeholder:\"Enter your Name\",value:name,onChange:handleNameChange,required:true}),/*#__PURE__*/_jsx(\"a\",{className:check?'Nevalid':'Valid',children:\"This name is already taken\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",placeholder:\"Enter your Password\",value:password,onChange:e=>setPassword(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"roles\",name:\"roles\",placeholder:\"Enter your Role\",value:roles,onChange:e=>setRoles(e.target.value),required:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-input-container\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"file-input-label\",htmlFor:\"file\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"file\",name:\"file\",onChange:e=>setFile(e.target.files[0]),required:true})]}),/*#__PURE__*/_jsx(\"button\",{id:\"but\",className:check?'send':'unsend',type:\"submit\",children:\"Send\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"Back\",onClick:()=>navigate('/'),children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"})]});};export default UserForm;","map":{"version":3,"names":["React","useState","useNavigate","events","jsx","_jsx","jsxs","_jsxs","UserForm","name","setName","password","setPassword","roles","setRoles","file","setFile","check","setCheck","navigate","handleSubmit","event","preventDefault","formData","FormData","append","response","fetch","method","body","error","console","alert","checking","log","JSON","stringify","headers","status","handleNameChange","newName","target","value","className","children","id","onSubmit","encType","type","placeholder","onChange","required","e","htmlFor","files","onClick"],"sources":["C:/Users/dimu2/Java/SpringSecurity_1805/Frontend/spa/src/RegisterPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport './Styles/Registr.css';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport * as events from \"events\";\r\n\r\nconst UserForm = () => {\r\n    const [name, setName] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [roles, setRoles] = useState('');\r\n    const [file, setFile] = useState(null);\r\n    const [check, setCheck] = useState(true);\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault(); // предотвращаем стандартное поведение отправки формы\r\n\r\n        const formData = new FormData();\r\n        formData.append('name', name);\r\n        formData.append('password', password);\r\n        formData.append('roles', roles);\r\n        formData.append('file', file);\r\n\r\n        try {\r\n            const response = await fetch('https://localhost:8080/api/user', {\r\n                method: 'POST',\r\n                body: formData\r\n            });\r\n\r\n\r\n                navigate('/');\r\n\r\n        } catch (error) {\r\n            console.error('Error:', error);\r\n            alert('Ошибка при отправке данных');\r\n        }\r\n    };\r\n\r\n    const checking = async (name) => {\r\n        try {\r\n            console.log(name)\r\n            const response = await fetch('https://localhost:8080/api/checking', {\r\n                method: 'POST',\r\n                body: JSON.stringify({ name }),\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            });\r\n\r\n            if (response.status === 200) {\r\n                setCheck(false);\r\n            } else {\r\n                setCheck(true);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error:', error);\r\n            setCheck(true);\r\n        }\r\n    };\r\n\r\n    const handleNameChange = async (events) => {\r\n        const newName = events.target.value;\r\n        setName(newName);\r\n        await checking(newName);\r\n    };\r\n\r\n    return (\r\n        <div className=\"form-container\">\r\n            <h1>Enter Data</h1>\r\n            <form id=\"userForm\" onSubmit={handleSubmit} encType=\"multipart/form-data\">\r\n                <input\r\n                    className={check ? 'input-valid' : 'input-invalid'}\r\n                    type=\"text\"\r\n                    id=\"name\"\r\n                    name=\"name\"\r\n                    placeholder=\"Enter your Name\"\r\n                    value={name}\r\n                    onChange={handleNameChange}\r\n                    required\r\n                />\r\n                <a className={check ? 'Nevalid' : 'Valid'}>This name is already taken</a>\r\n                <input\r\n                    type=\"password\"\r\n                    id=\"password\"\r\n                    name=\"password\"\r\n                    placeholder=\"Enter your Password\"\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                    required\r\n                />\r\n                <input\r\n                    type=\"text\"\r\n                    id=\"roles\"\r\n                    name=\"roles\"\r\n                    placeholder=\"Enter your Role\"\r\n                    value={roles}\r\n                    onChange={(e) => setRoles(e.target.value)}\r\n                    required\r\n                />\r\n                <div className=\"file-input-container\">\r\n                    <label className=\"file-input-label\" htmlFor=\"file\">Выберите аватар</label>\r\n                    <input\r\n                        type=\"file\"\r\n                        id=\"file\"\r\n                        name=\"file\"\r\n                        onChange={(e) => setFile(e.target.files[0])}\r\n                        required\r\n                    />\r\n                </div>\r\n                <button id=\"but\" className={check?'send':'unsend'} type=\"submit\">Send</button>\r\n            </form>\r\n            <button className=\"Back\" onClick={() => navigate('/')}>Назад</button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UserForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}